(function(){define("lib/G",[],function(){"use strict";var e=!!document.all&&navigator.userAgent.indexOf("Opera")===-1,t=e&&!("maxHeight"in document.body.style),n=e&&"prototype"in Image,r=e&&!t&&!n,i=window,s=i.document,o={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"};return{ua:{isIE:e,isIE6:t,isIE8:n,isIE7:r,isFF:!!s.getBoxObjectFor||"mozInnerScreenX"in i,isOP:!!i.opera&&!!i.opera.toString().indexOf("Opera"),isOP9:/^function \(/.test([].sort),isWK:!!i.devicePixelRatio,isSF:/a/.__proto__=="//",isCR:/s/.test(/a/.toString),isIpad:/iPad/.test(navigator.userAgent),isIphone:/iPhone/.test(navigator.userAgent)},isHtml:function(e){var t=/^[^<]*(<[\w\W]+>)[^>]*$/;return t.test(e)},format:function(e,t,n){if(typeof t=="string"){var r=n?t:"{v}",i=n||t;return e.replace(r,""+i)}var s=t,i;return e.replace(/\{([^{}]+)\}/g,function(e,t){return i=s[t],i!==undefined?""+i:""})},each:function(e,t,n){var r,i,s,o=Array.prototype.forEach,u=Object.prototype.hasOwnProperty;n=n||this;if(e==null)return;if(o&&e.forEach===o)e.forEach(t,n);else if(e instanceof Array)for(i=0,s=e.length;i<s;i++)t.call(n,e[i],i,e);else for(var a in e)u.call(e,a)&&t.call(n,e[a],a,e)},scriptOnload:function(e,t){window.addEventListener?(e.addEventListener("load",t,!1),e.addEventListener("error",function(){t()},!1)):e.attachEvent("onreadystatechange",function(){var n=e.readyState;(n==="loaded"||n==="complete")&&t()})},loadScript:function(e,t){var n=s.createElement("script"),r=this.loadScript.head=this.loadScript.head||s.getElementsByTagName("head")[0];return this.scriptOnload(n,function(){t&&t.call(n);try{if(n.clearAttributes)n.clearAttributes();else for(var e in n)delete n[e]}catch(i){}r.removeChild(n)}),n.async=!0,n.src=e,r.insertBefore(n,r.firstChild)},type:function(e){return e==null?String(e):o[Object.prototype.toString.call(e)]||"object"},isFun:function(e){return this.type(e)==="function"}}}),define("lib/support",["lib/G"],function(e){"use strict";var t=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),n="Webkit Moz O ms Khtml".split(" "),r=document.createElement("div");return{fixed:function i(){if(typeof i.r!="undefined")return i.r;var t=!0;if(e.ua.isIpad||e.ua.isIphone)t=navigator.userAgent.match(/[5-9]_[0-9]/)!==null;else{var n=document.createElement("div"),r=document.createElement("div");n.style.position="absolute",n.style.top="200px",r.style.position="fixed",r.style.top="100px",n.appendChild(r),document.body.appendChild(n),r.getBoundingClientRect&&r.getBoundingClientRect().top==n.getBoundingClientRect().top&&(t=!1),document.body.removeChild(n),n=null,r=null}return i.r=t,t},touchEvent:function s(){if(typeof s.r!="undefined")return s.r;var e=!0,t=["touchstart","touchmove","touchend","touchcancel"];for(var n=0,i=t.length;n<i;n++){var o=t[n];o="on"+o;var u=o in r;u||(r.setAttribute(o,"return;"),u=typeof r[o]=="function");if(!u){e=!1;break}}return s.r=e,e},cssanimation:function o(){if(typeof o.r!="undefined")return o.r;var e=!1,t=r.style,i="animationName",s=i.charAt(0).toUpperCase()+i.substr(1),u=(i+" "+n.join(s+" ")+s).split(" ");for(var a in u)if(t[u[a]]!==undefined){e=!0;break}return o.r=e,e}}}),define("lib/Base",[],function(){"use strict";var e=function(){};return e.extend=function(e,t){var n=t||this;for(var r in n)n.hasOwnProperty(r)&&r!=="prototype"&&(e[r]=n[r]);for(var i in n.prototype)n.prototype.hasOwnProperty(i)&&(e.prototype[i]=n.prototype[i])},e}),define("lib/Event",["lib/Base"],function(e){"use strict";function o(){}var t=Array.prototype.slice,n=Object.prototype.toString,r=function(e){return typeof e=="object"?e===null?"null":/\[object (\w+)\]/.exec(n.call(e))[1].toLowerCase():typeof e},i=function(e,t,n){var i,s,o,u=Array.prototype.forEach;n=n||this;if(e==null)return;if(u&&e.forEach===u)e.forEach(t,n);else if(r(e)==="array")for(s=0,o=e.length;s<o;s++)t.call(n,e[s],s,e);else for(var a in e)ObjectProto.hasOwnProperty.call(e,a)&&t.call(n,e[a],a,e)},s=function(e,t,n){var i,s,o,u,a=Array.prototype.filter;n=n||this;if(e==null)return;if(a&&e.filter===a)return e.filter(t,n);if(r(e)==="array"){u=[];for(s=0,o=e.length;s<o;s++)t.call(n,e[s],s,e)&&u.push(e[s])}else{u={};for(var f in e)ObjectProto.hasOwnProperty.call(e,f)&&t.call(n,e[f],f,e)&&(u[f]=e[f])}return u};return o.prototype.on=function(e,t,n,r){return this.eventQueue=this.eventQueue||{},this.eventQueue[e]=this.eventQueue[e]||[],this.eventQueue[e].push({callback:t,context:n,once:r}),this},o.prototype.off=function(e,t){this.eventQueue=this.eventQueue||{};if(this.eventQueue[e]==null)return;return t?(this.eventQueue[e]=s(this.eventQueue[e],function(e,n){return e.callback!==t}),this.eventQueue[e].length===0&&delete this.eventQueue[e]):delete this.eventQueue[e],this},o.prototype.fire=function(e,n){this.eventQueue=this.eventQueue||{};var r=this.eventQueue[e],s=!0;if(r){var o=t.call(arguments,1);i(r,function(t){t.callback.apply(t.context,o)===!1&&(s=!1),t.once&&this.off(e,t.callback)},this)}return s},e.extend(o),o}),define("lib/Overlay",["lib/support","lib/Event","lib/G"],function(e,t,n){"use strict";function y(e){var t,n;e?(t=(u.height()-h.height())/2+(document.documentElement.scrollTop||window.pageYOffset||0),n=(u.width()-h.width())/2+(document.documentElement.scrollLeft||window.pageXOffset||0)):(t=(u.height()-h.height())/2,n=(u.width()-h.width())/2),h.css({top:t,left:n})}function b(e,t){v&&v.length&&v.css({opacity:e||.5,"background-color":t||"#000"}).show()}function w(){v&&v.length&&v.hide()}function E(){v.css({top:document.documentElement.scrollTop||window.pageYOffset||0,left:document.documentElement.scrollLeft||window.pageXOffset||0})}function S(){v.css({width:u.width(),height:u.height()})}function x(){n.ua.isIE6&&v&&v.length&&(v.css({position:"absolute",bottom:"auto",right:"auto"}),S(),E())}function T(t){if(T.inited)return;T.inited=!0,i=t||"gui",s='<div id="blockWindow" class="'+i+'-block">                           <div class="'+i+'-block-b">                               <h4 class="'+i+'-block-hd">                                   <span id="blockTitle"></span>                                   <a class="blockClose '+i+'-block-close" href="#" title="关闭">X</a>                               </h4>                               <div id="blockContent" class="'+i+'-block-bd"></div>                           </div>                       </div>',h=$(s),h.appendTo("body"),p=$(a),d=$(f),g=[h,p],navigator.userAgent.match(/iPad|iPhone/i)!==null?c=navigator.userAgent.match(/[5-9]_[0-9]/)!==null:(c=e.fixed(),u.resize(function(){m&&m.pos()})),n.ua.isIE6&&u.resize(function(){v&&v.length&&m&&S()}).scroll(function(){v&&v.length&&m&&E()}),h.delegate(l,"click",function(e){e.preventDefault(),m&&m.close()})}function N(e,t,n,r){this._isOpen=!1,T.call(this,r),this._fixed=c,this._coverNeedShowed=!1,this._initedCover=!1,e&&!r&&this.open(e,t,n)}var r=0,i,s='<div id="blockWindow" class="gui-block">                           <div class="gui-block-b">                               <h4 class="gui-block-hd">                                   <span id="blockTitle"></span>                                   <a class="blockClose gui-block-close" href="#" title="关闭">X</a>                               </h4>                               <div id="blockContent" class="gui-block-bd"></div>                           </div>                       </div>',o='<iframe src="{v}" id="blockIframe" frameborder="0" width="100%"></iframe>',u=$(window),a="#blockContent",f="#blockTitle",l=".blockClose",c,h,p,d,v,m,g;return N.prototype={openCallBack:function(e){return e&&this.on("open",e,this),this},closeCallBack:function(e){return e&&this.on("close",e,this),this},afterClose:function(e){return e&&this.on("afterClose",e,this),this},afterOpen:function(e){return e&&this.on("afterOpen",e,this),this},isOpen:function(){return this._isOpen},close:function(){return this._isOpen?this.fire("close",g)?(h.hide(),this._isOpen=!1,m=null,this.fire("afterClose",g),this):this:this},open:function(e,t,r){return this.fire("open",g)?(m&&m!==this&&m.close(),m=this,this.undelegate(),t&&this.delegate(t),e&&!n.isHtml(e)&&(e=n.format(o,e)),p.html(e||""),this._title&&d.html(this._title),this._width&&h.width(this._width),h.css("position",!this._fixed||!c?"absolute":"fixed"),this.pos(),h.show(),this._isOpen=!0,r&&r.call(this,p),this.fire("afterOpen",g),this):this},delegate:function(e){if(!e.length){p.delegate(e.selector,e.event,e.func);return}return n.each(e,function(e){this.delegate(e.selector,e.event,e.func)},p),this},undelegate:function(){return p.undelegate(),this},pos:function(){return y(!this._fixed||!c),n.ua.isIE6&&this._cover&&this._cover.length&&this._cover.css(),this},title:function(e){return this._title=e,this._isOpen&&d.html(e),this},width:function(e){return this._width=e,this._isOpen&&(h.width(e),this.pos()),this},pin:function(){if(this._fixed||!c)return;return this._fixed=!0,this._isOpen&&(h.css("position","fixed"),this.pos()),this},unpin:function(){if(!this._fixed)return;return this._fixed=!1,this._isOpen&&(h.css("position","absolute"),this.pos()),this},showCover:function(e,t){if(!v||!v.length)v=$('<div style="position:fixed;top:0;left:0;right:0;bottom:0;display:none;z-index:'+((parseInt(h.css("z-index"),10)||0)-1)+';"></div>').appendTo("body"),x();if(!this._initedCover){var n=this;this.on("afterClose",function(){n._coverNeedShowed&&w()}).on("afterOpen",function(){n._coverNeedShowed&&b(n._coverOpacity,n._coverColor)}),this._initedCover=!0}return typeof e=="string"&&(t=e,e=null),e&&(this._coverOpacity=e),t&&(this._coverColor=t),b(e||this._coverOpacity,t||this._coverColor),this._coverNeedShowed=!0,this},hideCover:function(){return w(),this._coverNeedShowed=!1,this}},t.extend(N),N}),define("lib/cookies",{get:function(e){"use strict";if(document.cookie.length>0){var t,n=document.cookie.indexOf(e+"=");if(n!=-1)return n=n+e.length+1,t=document.cookie.indexOf(";",n),t==-1&&(t=document.cookie.length),unescape(document.cookie.substring(n,t))}return""},set:function(e,t,n,r){"use strict";return document.cookie=e+"="+escape(t)+(n==null?"":";expires="+n.toGMTString())+";path="+(r||"/"),this},remove:function(e,t){"use strict";var n=new Date;n.setTime(n.getTime()-1);var r=this.get(e);r!=null&&(document.cookie=e+"="+r+";expires="+n.toGMTString()+";path="+(t||"/"))}}),define("lib/JSON2",function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}window.JSON||(window.JSON={}),typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()),define("lib/JSON2",function(){}),define("lib/store",["lib/JSON2"],function(){var e="localStorage"in window,t={set:function(){},get:function(){},remove:function(){},clear:function(){},isSupport:!1};if(e){var n=window.localStorage,r=function(e,t){var r=n[e];return function(i){setTimeout(function(){i=i||window.storageEvent;var s=i.key,o=i.newValue;if(!s){var u=n[e];u!=r&&(s=e,o=u)}s==e&&(t&&t(o==null?null:JSON.parse(o)),r=o)},0)}};t.set=function(e,t){try{n.setItem(e,JSON.stringify(t))}catch(r){}},t.get=function(e){var r=n.getItem(e),i=r==null?null:JSON.parse(r);return i!==null&&i.date&&i.expiredDate&&t._expired(e,i.expiredDate,i.date)&&(i=null),i},t.remove=function(e){n.removeItem(e)},t.clear=function(){n.clear()},t.onStorage=function(e,t){window.addEventListener?window.addEventListener("storage",r(e,t),!1):document.attachEvent("storage",r(e,t))},t._expired=function(e,n,r){return(new Date).getTime()-r>=n*864e5?(t.remove(e),!0):!1},t.isSupport=!0}else t={o:null,defExps:365,init:function(){if(!t.o)try{t.o=document.createElement("input"),t.o.type="hidden",t.o.addBehavior("#default#userData"),document.body.appendChild(t.o)}catch(e){return!1}return!0},set:function(e,n,r){if(t.init()){var i=t.o;i.load(e),n&&i.setAttribute("code",JSON.stringify(n));var s=new Date,r=r?r:t.defExps;s.setDate(s.getDate()+r),i.expires=s.toUTCString(),i.save(e)}},get:function(e){if(t.init()){var n=t.o;return n.load(e),typeof n.getAttribute("code")=="undefined"?null:JSON.parse(n.getAttribute("code"))}},onStorage:function(){},remove:function(e){t.set(e,!1,-365)},isSupport:!0};return t}),define("lib/OneTask",["lib/store","lib/JSON2","lib/cookies","lib/Event"],function(e,t,n,r){"use strict";function a(e,n,r){function s(){i._run()}this.name="T"+e,this.serverTimeKey=this.name+"T",this.jobMsgKey=this.name+"M",this.asyncJob=n,this.jobMsg=null,this.isServer=!1,this.params=r&&r.params,this.serverTimeout=r&&r.serverTimeout||2e3,this.intervalTime=r&&r.interval||3e4,this.timeUpdateInterval=0,this.jobRunInterval=0,this.serverCheckInterval=0,this.isRunning=!1,this.inited=!1;var i=this;i.callback=function(e,n){i.fire("callback",n?e:t.parse(e)),i.jobRunInterval=setTimeout(s,i.intervalTime)}}var t=window.JSON,i=location.pathname+"?"+(new Date).getTime()+Math.random(),s=e.isSupport?e.set:function(e,r){n.set(e,t.stringify(r))},o=e.isSupport?e.get:function(e){var r=n.get(e);return r?t.parse(r):null},u=e.isSupport?e.remove:function(e){n.remove(e)};return r.extend(a),a.prototype._run=function(){var e=this;if(!e.isRunning)return this;if(e.isServer){var n=function(n){if(e.isServer){var r=t.stringify(n);s(e.jobMsgKey,r),e.jobMsg!==r&&(e.fire("changeCallBack",n),e.jobMsg=r),e.callback(n,!0)}else e.callback(e.jobMsg)};this.params?e.asyncJob.apply(e,[n].concat(this.params)):e.asyncJob.call(e,n)}else e.callback(e.jobMsg);return this},a.prototype.start=function(){var n=this;return n.isRunning?this:(n.isRunning=!0,n.switchToServer(),e.isSupport&&!n.inited&&e.onStorage(n.jobMsgKey,function(e){n.isRunning&&n.jobMsg!==e&&(n.jobMsg=e,n.fire("changeCallBack",t.parse(e)))}),n.serverCheckInterval=setInterval(function(){n.check();if(n.isServer)return;var r=parseInt(o(n.serverTimeKey),10)||0,i=(new Date).getTime();(!r||i-r>n.serverTimeout)&&n.switchToServer();if(!e.isSupport&&n.isRunning){var s=o(n.jobMsgKey);n.jobMsg!==s&&(n.jobMsg=s,n.fire("changeCallBack",t.parse(s)))}},this.serverTimeout/2),n._run(),n.inited=!0,this)},a.prototype.stop=function(){var e=this;return e.isRunning=!1,e.switchToClient(),clearInterval(e.serverCheckInterval),this},a.prototype.cancel=function(){return this.isServer&&(u(this.name),u(this.serverTimeKey),u(this.jobMsgKey)),clearInterval(this.timeUpdateInterval),clearTimeout(this.jobRunInterval),clearInterval(this.serverCheckInterval),this},a.prototype.check=function(e){var t=this;return e=e||o(t.name),e?e!==i?t.isServer=!1:t.isServer=!0:t.switchToServer(),this},a.prototype.switchToServer=function(){var e=this;return e.isServer?this:(e.isServer=!0,s(e.name,i),s(e.serverTimeKey,(new Date).getTime()),e.timeUpdateInterval=setInterval(function(){o(e.name)!==i?clearInterval(e.timeUpdateInterval):s(e.serverTimeKey,(new Date).getTime())},e.serverTimeout/2),this)},a.prototype.switchToClient=function(){var e=this;return e.isServer?(e.isServer=!1,u(e.name),u(e.serverTimeKey),clearInterval(e.timeUpdateInterval),this):this},a.prototype.useCookie=!e.isSupport,a.prototype.onChangeCallBack=function(e){return this.on("changeCallBack",e,this),this},a.prototype.onCallBack=function(e){return this.on("callback",e,this),this},a}),define("lib/accessToken",["lib/cookies"],function(e){"use strict";var t,n=window.location.host,r=window.url_re_signin||"",i=window.client_id||32353;return t=e.get("_"+i+"_access_token"),{checkToken:function(){n=window.location.host,t=e.get("_"+i+"_access_token")},getToken:function(){return t}}}),define("lib/NotifyUtil",["lib/OneTask","lib/Event","lib/JSON2","lib/accessToken"],function(e,t,n,r){function u(){this.on("update",function(e,t,n){s=t==null?s:t,localRemindCount=e==null?localRemindCount:e})}var i=3e4,s=-1;localRemindCount=-1;var o={getNotifyInfo:function(e,t){var n,i="/apis/community/rn_num.json";$.ajax.setAccesstoken||(n=r.getToken(),i="/apis/community/rn_num.json?access_token="+n),$.ajax({url:i,type:"get",dataType:"json",success:e,cache:!1})},getNotifyList:function(e){$.ajax({url:"/apis/community/notice.json",type:"get",dataType:"json",success:e,cache:!1})},getRemindList:function(e){$.ajax({url:"/apis/community/reminder.json",type:"get",dataType:"json",success:e,cache:!1})},deleteNotify:function(e,t,n,r){$.ajax({url:"/apis/community/notice_ignore.json",data:{nid:e},type:"put",dataType:"json",success:n,error:r})}};u.prototype={deleteNotify:function(e,t,n){var r=this;o.deleteNotify(e,"",function(e){e=e.result,r.fire("update",null,e.count,e.list,null,e.all),t&&t()},n)},deleteAllNotify:function(e,t){o.deleteNotify("","all",function(){localRemindCount=0,s=0,e&&e()},t)},getNotifyList:function(e,t){o.getNotifyList(e,t)},getRemindList:function(e,t){o.getRemindList(e,t)},onUpdate:function(e){this.on("update",e)},onUpdateRemind:function(e){this.on("updateRemind",e)}},t.extend(u);var a=new u,f=new e("N",function(e){o.getNotifyInfo(function(t){e(t.result)})},{interval:i});return window.ukey&&f.onChangeCallBack(function(e){var t=e.n,n=e.r;e!=null&&(t!==s||n!==localRemindCount)&&(t?a.getNotifyList(function(e){a.fire("update",n,t,e.result)}):a.fire("update",n,t),n&&a.getRemindList(function(e){a.fire("updateRemind",e.result)}))}).start(),f.useCookie&&$(window).unload(function(){f.cancel()}),a}),define("lib/tmpl",[],function(){function e(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}var t={entities:e};return function(n,r){/\W/.test(n)||(n=document.getElementById(n).innerHTML);var i=new Function("funcs, obj","var p=[],print=function(){p.push.apply(p,arguments);};with(funcs){with(obj){p.push('"+n.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',entities($1),'").replace(/\t:=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}}return p.join('');");return r?i(t,r):function(e){return i(t,e)}}}),define("lib/notify",["lib/cookies","lib/NotifyUtil","lib/tmpl"],function(e,t,n){"use strict";function m(){function n(){t.deleteAllNotify(function(){e.dismissIds=[],e.$noticeBottom.length||e.$noticeTitle.html("通知"),e.noticeNum=0,e.$noticeBlock.fadeOut("slow",function(){f?e.$noticeNum.after(h.clone()).remove():e.$noticeDiv.removeClass(i),e.hide(),f||(e.$noticeBottom.addClass("ghide"),e.$noticeNum.text(0))})})}function s(n){if($.inArray(n,e.dismissIds)!==-1)return;e.dismissIds.push(n),e.dismissIds.length===1&&t.deleteNotify(e.dismissIds[0],function(){var t=e.$noticeBlock.find("li[data-id="+e.dismissIds[0]+"]");e.$noticeNum.text(e.noticeNum>99?"99":e.noticeNum),e.noticeNum?e.$noticeDiv.addClass(i):f?e.$noticeNum.after(h.clone()).remove():e.$noticeDiv.removeClass(i),e.dismissIds.shift(),e.dismissIds.length&&s(e.dismissIds[0]),e.noticeNum===0&&(f?e.$noticeNum.after(h.clone()).remove():e.$noticeDiv.removeClass(i),f?e.$noticeBlock.addClass("hide"):e.hide(),f||e.$noticeBottom.addClass("ghide"))},function(){setTimeout(function(){s(e.dismissIds[0])},3e4)})}var e=this;this.remindList=[],this.remindNum=0,this.$remindDiv=$("#gheaderRemind"),this.$remindBlock=$("#remindBlock"),this.$remindNum=$("#msgNum"),this.msgNum=0,this.$msgNum=$("#msgNum"),this.draftNum=0,this.$draftNum=$("#draftNum"),this.$draftDoor=$("#draftDoor"),this.$totleNum=$("#totleNum"),this.$remindTitle=this.$remindDiv.children().eq(0),this.noticeList=[],this.noticeNum=0,this.$noticeBottom=$("#noticeBottom"),this.$noticeDiv=f?$("#headerNotice"):$("#gheaderNotice"),this.$noticeBlock=$("#noticeBlock"),this.$noticeNum=$("#noticeNum"),this.$noticeTitle=this.$noticeDiv.children().eq(0),this.$settingsDiv=$("#gheaderSettings"),this.$settingsBlock=$("#settingsBlock"),this.$settingsTitle=this.$settingsDiv.children().eq(0),this.dismissIds=[];if(!this.$noticeDiv.length||!this.$noticeBlock.length)return;this.$noticeBlock.delegate("[data-operation=openLink]","mouseup",function(t){if(t.which!==1&&t.which!==2)return;var n=$(this).closest("li"),r=n.data("id");n.siblings().length?(e.noticeNum--,e.$noticeNum.text(e.noticeNum>99?"99":e.noticeNum),e.noticeNum?f?"":e.$noticeDiv.addClass(i):f?e.$noticeNum.after(h.clone()).remove():e.$noticeDiv.removeClass(i),n.fadeOut("slow",function(){n.remove()})):(e.$noticeBottom.length||e.$noticeTitle.html("通知"),e.$noticeDiv.removeClass(i),e.$noticeBlock.fadeOut("slow",function(){f?e.$noticeNum.after(h.clone()).remove():"",f?e.$noticeBlock.addClass("hide"):e.hide(),e.$noticeBottom.length&&e.$noticeBottom.addClass("ghide")})),s(r)}),this.$remindBlock.delegate("[data-operation=openLink]","mouseup",function(t){if(t.which!==1&&t.which!==2)return;var n=$(this).closest("li"),r=$(this).closest("ul");e.remindNum--,e.msgNum--,e.$msgNum.length&&e.$msgNum.text(e.msgNum),e.$totleNum.length&&e.$totleNum.text(e.remindNum>99?"99":e.remindNum),e.msgNum||r.addClass("no-msg"),e.remindNum?e.$remindDiv.addClass(i):e.$remindDiv.removeClass(i),n.fadeOut("slow",function(){n.remove()})}),this.$noticeBlock.delegate("[data-operation=dismissOne]","click",function(){var e=$(this).closest("li").css("opacity",.5).data("id");s(e)}),this.$noticeBlock.delegate("[data-operation=dismissAll]","click",n),$("body").bind("click",function(t){!$.contains(e.$noticeDiv[0],t.target)&&$(t.target).data("operation")!=="dismissOne"&&e.hide(),f||($.contains(e.$remindDiv[0],t.target)||e.hideCertain("remind"),$.contains(e.$settingsDiv[0],t.target)||e.hideCertain("settings"))}),this.$noticeTitle.click(function(){e._isClosed?e.show():e.hide()}),this.$remindTitle.click(function(){e.$remindBlock.toggle().parent().toggleClass(r)}),this.$settingsTitle.click(function(){e.$settingsBlock.toggle().parent().toggleClass(r)}),t.onUpdate(function(t,n,r){e.update(t,n,r),e._notify()}),t.onUpdateRemind(function(t){e.updateRemind(t)})}var r="gactived",i="unread",s="no-draft",o="暂无草稿",u="进入草稿箱",a=window.location.host,f=a.indexOf("mooc")>-1?!0:!1,l=a.indexOf("liuyanbaike")>-1?!0:!1,c=!f&&!l,h=$('<span id="noticeNum">（0）</span>'),p=f?'<li data-id="<%=id%>">                                <p><a href="<%=url%>" data-operation="openLink" target="_blank"><%=content%></a></p>                                <a href="javascript: void 0;" class="icon-close-g" data-operation="dismissOne">x</a>                            </li>':'<li data-id="<%=id%>">                                <p><a href="<%=url%>" data-operation="openLink" target="_blank"><%=content%></a></p>                                <a href="javascript: void 0;" class="gnicon-close" data-operation="dismissOne">x</a>                            </li>',d='<li data-id="<%=id%>">                                <p><a href="<%=url%>" data-operation="openLink" target="_blank"><%=content%></a></p>                            </li>',v='<li data-id="id">                                <p><a href="<%=url%>" target="_blank"><%=content%></a></p>                            </li>';return m.prototype={_isClosed:!0,_init:function(){var t=this,n="isN",r=e.get(n);if(!r){var i=new Date;i.getHours()>4&&i.setDate(i.getDate()+1),i.setHours(4,0,0,0),e.set(n,1,i),t.noticeNum?t.show():t._notify()}else t._notify()},_notify:function(){var e=this;return e.remindNum?(e.$remindDiv.addClass(i),f||e.$totleNum.text(e.remindNum>99?"99":e.remindNum)):(e.$remindDiv.removeClass(i),e.msgList=[],e.$totleNum.text(0),e.$remindBlock.find("ul").eq(0).html("").addClass("no-msg")),e.$noticeNum.text(e.noticeNum>99?"99":e.noticeNum),e.noticeNum?(f?e.$noticeNum.text(e.noticeNum).addClass("header-i-notice-num"):e.$noticeDiv.addClass(i),e.$noticeBottom.length&&e.$noticeBottom.removeClass("ghide")):f?e.$noticeNum.after(h.clone()).remove():e.$noticeDiv.removeClass(i),e.$noticeBlock.find("ul").html(e.noticeNum?e.noticeList.join(""):""),this},update:function(e,t,r){return this.remindNum=e==null?this.remindNum:e,this.noticeList=r||[],this.noticeList.length>5&&(this.noticeList=this.noticeList.slice(0,5)),this.noticeList=$.map(this.noticeList,function(e){return n(p,e)}),this.noticeNum=t||0,this.noticeNum===0&&(this.noticeList=[],this.hide()),this._init(),this._notify(),this},updateRemind:function(e){var t=this;return t.msgList=e.message||[],t.draftList=e.draft||[],t.$msgNum.length&&t.$msgNum.text(t.msgList.length),t.msgNum=t.msgList.length,t.$draftNum.length&&t.$draftNum.text(t.draftList.length),t.draftNum=t.draftList.length,t.$totleNum.length&&t.$totleNum.text(t.remindNum>99?"99":t.remindNum),t.draftNum?(t.$draftDoor.removeClass(s),t.$draftDoor.text(u)):(t.$draftDoor.addClass(s),t.$draftDoor.text(o)),t.msgNum>0&&t.$remindBlock.find("ul").eq(0).removeClass("no-msg"),t.msgNum>2&&(t.msgList=t.msgList.slice(0,2)),t.draftNum>2&&(t.draftList=t.draftList.slice(0,2)),t.msgList=$.map(t.msgList,function(e){return n(d,e)}),t.$remindBlock.find("ul").eq(0).html(t.msgList.join("")),t.draftList=$.map(t.draftList,function(e){return n(v,e)}),t.$remindBlock.find("ul").eq(1).html(t.draftList.join("")),this},hide:function(){return this.$noticeBlock.hide(),this.$noticeDiv.removeClass(r),this._isClosed=!0,this},hideCertain:function(e){return this["$"+e+"Block"].hide(),this["$"+e+"Div"].removeClass(r),this},show:function(){var e=this;return e._notify(),f?e.$noticeDiv.removeClass("hide"):e.$noticeDiv.addClass(r),e.$noticeBlock.show(),e._isClosed=!1,this}},function(){return new m}}),define("lib/ga",[],function(){window._bdhmProtocol="https:"==document.location.protocol?"https://":"http://",window._gaq=window._gaq||[],_gaq.push(["_setAccount","UA-19521615-1"]),_gaq.push(["_setDomainName","guokr.com"]),_gaq.push(["_trackPageview"]),_gaq.push(["_trackPageLoadTime"]),window.ukey?(_gaq.push(["_setCustomVar",1,"Is Registered","Yes",1]),_gaq.push(["_setCustomVar",2,"Is Signed In","Yes",3])):(_gaq.push(function(){var e=_gat._getTrackerByName(),t=e._getVisitorCustomVar(1);t!=="Yes"&&t!=="No"&&_gaq.push(["_setCustomVar",1,"Is Registered","No",1])}),_gaq.push(["_setCustomVar",2,"Is Signed In","No",3]));var e="text/javascript",t=!0,n=document.getElementsByTagName("script")[0],r=document.createElement("script"),i=document.createElement("script");r.type=e,r.async=t,r.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",i.type=e,i.async=t,i.src=_bdhmProtocol+"hm.baidu.com/h.js?95dfd07652f91dffd9647f46a3ca9fab",n.parentNode.insertBefore(r,n),n.parentNode.insertBefore(i,n)}),require(["lib/Overlay","lib/cookies","lib/notify","lib/ga","lib/tmpl"],function(e,t,n,r,i){"use strict;";function o(e){return $.ajax({url:"/apis/group/group.json?retrieve_type=by_search",type:"get",data:{name:e,limit:3},success:function(e){var t=e.result,n='<li>                                    <a href="<%= url %>" class="group-link">                                        <img class="group-img" src="<%= img %>">                                        <span class="group-info">                                            <span class="group-name"><%= name %></span><%= member %>人加入                                        </span>                                    </a>                                </li>',r="";if(t.length){for(var s=0;s<t.length;s++)r+=i(n,{url:t[s].url,name:t[s].name,img:t[s].icon.normal,member:t[s].members_count});$("#searchGroup").siblings(".dropdown-group").html(r).show()}else u()},dataType:"json"})}function u(){$("#searchGroup").siblings(".dropdown-group").hide().find("li").remove()}function a(){var e=null,t="";$("#searchGroupInput").bind("change paste keyup",function(){var n=$(this);e&&clearTimeout(e),e=setTimeout(function(){var e=n.val().trim();if(e===""){u();return}t!=e&&(t=e,o(e))},500)}),$(document).click(function(e){var t=$("#searchGroup").parent();$.contains(t[0],e.target)||u()})}$("#moreNav").length&&$(document).click(function(e){$.contains($("#moreNav")[0],e.target)?$("#moreNav .other").toggleClass("gh-nav-active").next().toggle():$("#moreNav .other").removeClass("gh-nav-active").next().hide()});var s=$(".gh-search p");s.length&&s.find("input[type=text]").focus(function(){$(this).parents(".gh-search p").addClass("focus")}).blur(function(){$(this).parents(".gh-search p").removeClass("focus")}),a();var f=function(e,t){var n=l(url_signin).split("?"),r=n[1]?n[1].split("&"):[],i=r.length,e=encodeURIComponent(e),s=!1;for(var o=0;o<i;o++)if(r[o].indexOf("success=")>-1){t?r[o]="success="+e:r[o]+=e,s=!0;break}return s||r.push("success="+e),n[1]=r.join("&"),n.join("?")},l=function(e){return e=e.split("?"),e[0]=e[0]+"iframe/",e.join("?")};$("body").delegate("a[data-login], input[data-login]","click",function(t){if(!ukey){t.preventDefault();var n=new e,r=$(this).attr("data-login"),i=$(this).attr("data-redirect")!=undefined,s=r=="yes"?l(url_signin):f(r,i);n.showCover().open(s,null,function(){n.title("登录"),n.width(515),n.unpin(),$("#blockContent").height(226).find("iframe").css({overflow:"hidden",height:"100%"})})}});if(window.ukey){var c=window.client_id||32353;token=t.get("_"+c+"_access_token"),host=window.location.host;var h=Array.prototype.slice,p=function(e){return h.call(e,0)},d=function(e,t){return function(){return e.apply(this,t.apply(this,arguments)||arguments)}},v=function(e){return token&&(e=e||{},e.access_token=token),e};$.ajax=d($.ajax,function(e){e.data=v(e.data);if(e.type&&e.type.toLowerCase()=="delete"){var t=$.param(e.data);e.url+="?"+t}}),$.ajax.setAccesstoken=!0,n(),$.ajax({url:"/apis/auth/account.json",data:{retrieve_type:"is_standalone",oauth_type:"renren"},success:function(e){if(e.result){var t='<div class="white-overlay">                                        <div class="white-overlay-cover"></div>                                        <div class="white-overlay-dialog">                                            <p>尊敬的用户：<br>                                            您好！由于来自人人网的注册数量日渐减少，我们决定使用受众更广的登录平台替换人人网。果壳网将于2014年10月停止支持人人网登录，为了您能继续使用果壳网，请把当前帐号绑定一个邮箱。给您造成的不便深表歉意。                                            </p>                                            <a href="<%= url %>">去绑定邮箱</a>                                        </div>                                    </div>',n=i(t,{url:url_email_bind});$("body").append(n)}},dataType:"json"})}$("body").delegate("a[data-gaevent]","click",function(){var e=$(this).data("gaevent").split(":");_gaq.push(["_trackEvent",e[0],$(this).attr("href"),e[e.length-1]])})}),define("main",function(){})})();